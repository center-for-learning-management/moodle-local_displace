{"version":3,"file":"competency.min.js","sources":["../src/competency.js"],"sourcesContent":["/* eslint-disable */\nimport $ from 'jquery';\nimport Ajax from 'core/ajax';\nimport Notification from 'core/notification';\nimport Pending from 'core/pending';\nimport * as Str from 'core/str';\nimport Config from 'core/config';\n\nvar debug = false;\nvar queue = [];\nvar queueActiveItem = false;\n\nconst courseid = Config.courseId > 1 ? Config.courseId : 0;\nconst useSessionCompetencies = !courseid;\nlet sessionCompetencies = [];\n\nconst sessionCompetenciesTmp = $(':input[name=\"session_competencies\"]').val();\nif (sessionCompetenciesTmp) {\n  sessionCompetencies = sessionCompetenciesTmp.split(',');\n}\n\n/**\n * Add a single competency to a course.\n * @param {DOMElement} a sender of the event.\n */\nfunction competencyAddSingle(a) {\n  if (debug) {\n    console.log('Add single', a);\n  }\n\n  let id = $(a).closest('tr').attr('data-id');\n\n  if (useSessionCompetencies) {\n    sessionCompetencies.push(id);\n    $(a).closest('tr').addClass('used');\n    $(':input[name=\"session_competencies\"]').val(sessionCompetencies.join(','));\n    return;\n  }\n\n  let method = 'core_competency_add_competency_to_course';\n  let data = {'courseid': courseid, 'competencyid': id};\n  queue.push({'methodname': method, 'args': data, 'tr': $(a).closest('tr')});\n  $(a).closest('tr').addClass('queue-pending');\n  competencyQueue();\n};\n\n/**\n * Add/Remove multiple competencies\n * to/from a course.\n * @param {DOMElement} a sender of the event.\n */\nasync function competencyAddMultiple(a) {\n  // Get the first child to decide if we\n  // add or remove.\n  let tr = $(a).closest('tr');\n  let id = tr.attr('data-id');\n\n  let children = getChildren(tr);\n\n  if (children.length > 0) {\n    // falls einer noch nicht ausgewählt ist, alle auswählen, sonst alle abwählen\n    var selectAll = children.filter(':not(.used)').length > 0;\n\n    toggleNode(tr, true, true);\n\n    if (selectAll) {\n      children.not('.used').each(function () {\n        competencyAddSingle($(this).find('.addsingle'));\n      });\n    } else {\n      function removeNow() {\n        children.filter('.used').each(function () {\n          competencyRemoveSingle($(this).find('.removesingle'), true);\n        });\n      }\n\n      if (useSessionCompetencies) {\n        removeNow();\n      } else {\n        let shortname = $(a).closest('tr').find('.shortname').html();\n        const s = await get_strings([\n          {'key': 'competency:remove:title', component: 'local_displace'},\n          {'key': 'competency:remove:multiple', component: 'local_displace', param: {'shortname': shortname}},\n          {'key': 'yes'},\n          {'key': 'no'}\n        ]);\n\n        Notification.confirm(\n          s[0], s[1], s[2], s[3],\n          removeNow\n        );\n      }\n    }\n\n    if (useSessionCompetencies) {\n      $(':input[name=\"session_competencies\"]').val(sessionCompetencies.join(','));\n    }\n  }\n}\n\n/**\n * Remove a single competency from a course.\n * @param {DOMElement} a sender of the event.\n * @param {boolean} confirmed if the user confirmed the action.\n */\nasync function competencyRemoveSingle(a, confirmed) {\n  if (useSessionCompetencies) {\n    let id = $(a).closest('tr').attr('data-id');\n\n    sessionCompetencies = sessionCompetencies.filter((value) => value != id);\n    $(a).closest('tr').removeClass('used');\n    $(':input[name=\"session_competencies\"]').val(sessionCompetencies.join(','));\n    return;\n  }\n\n  if (typeof confirmed === 'undefined') {\n    var shortname = $(a).closest('tr').find('.shortname').html();\n    const s = await get_strings([\n      {'key': 'competency:remove:title', component: 'local_displace'},\n      {'key': 'competency:remove:single', component: 'local_displace', param: {'shortname': shortname}},\n      {'key': 'yes'},\n      {'key': 'no'}\n    ]);\n\n    Notification.confirm(\n      s[0], s[1], s[2], s[3],\n      function () {\n        competencyRemoveSingle(a, true);\n      }\n    );\n  } else {\n    if (debug) {\n      console.log('Remove single', a);\n    }\n    let id = $(a).closest('tr').attr('data-id');\n    let method = 'core_competency_remove_competency_from_course';\n    let data = {'courseid': courseid, 'competencyid': id};\n    queue.push({'methodname': method, 'args': data, 'tr': $(a).closest('tr')});\n    $(a).closest('tr').addClass('queue-pending');\n    competencyQueue();\n  }\n}\n\n/**\n * Handles the next item in queue.\n */\nfunction competencyQueue() {\n  if (queueActiveItem) {\n    return;\n  }\n  if (queue.length == 0) {\n    return;\n  }\n  let item = queue.shift();\n  if (debug) {\n    console.log('Queue Item', item);\n  }\n  queueActiveItem = true;\n  Ajax.call([{\n    methodname: item.methodname,\n    args: item.args,\n    done: function (result) {\n      $(item.tr).removeClass('queue-pending');\n      if (debug) {\n        console.log('Results of ' + item.methodname, result);\n      }\n      if (result) {\n        if (item.methodname == 'core_competency_add_competency_to_course') {\n          $(item.tr).addClass('used');\n        } else {\n          $(item.tr).removeClass('used');\n        }\n        $(item.tr).addClass('displace-alert success');\n        setTimeout(\n          function () {\n            $(item.tr).removeClass('displace-alert success');\n          }, 1000\n        );\n      } else {\n        $(item.tr).addClass('displace-alert danger');\n      }\n      queueActiveItem = false;\n      competencyQueue();\n    },\n    fail: function (ex) {\n      $(item.tr).addClass('displace-alert danger');\n      queueActiveItem = false;\n      Notification.exception(ex);\n    }\n  }]);\n}\n\n/**\n * Sets the rule outcome option.\n * @param {DOMElement} select\n */\nexport function setRuleOutcomeOption(select) {\n  let pendingPromise = new Pending();\n  let requests = [];\n\n  let coursecompetencyid = $(select).closest('tr').attr('data-id');\n  let ruleoutcome = $(select).val();\n  requests = Ajax.call([\n    {\n      methodname: 'core_competency_set_course_competency_ruleoutcome',\n      args: {coursecompetencyid: coursecompetencyid, ruleoutcome: ruleoutcome}\n    },\n    {\n      methodname: 'tool_lp_data_for_course_competencies_page',\n      args: {courseid: $(select).closest('table').attr('data-courseid'), moduleid: 0}\n    }\n  ]);\n  requests[1].then(function () {\n    $(select).addClass('displace-alert success');\n    setTimeout(\n      function () {\n        $(select).removeClass('displace-alert success');\n      },\n      1000\n    );\n  })\n    .then(pendingPromise.resolve);\n}\n\nfunction getCurrentTable() {\n  return $('.coursecompetenciesadd_framework:visible').first();\n}\n\nasync function loadSelectedFramework() {\n  var $select = $('.coursecompetenciesadd select[name=\"frameworkid\"]');\n  var selectedText = $select.find(\"option:selected\").text();\n\n  var $existingFramework = $('.coursecompetenciesadd_framework[data-frameworkid=\"' + $select.val() + '\"]');\n\n  // hide all other frameworks\n  $('#local_displace-framework-container').children().hide();\n\n  const s = await get_strings([\n    {key: 'competency:loading_framework', component: 'local_displace', param: selectedText}\n  ]);\n\n  if ($existingFramework.length) {\n    $existingFramework.show();\n  } else {\n    // Loading info table\n    var $loadingInfoTable = $('<div class=\"coursecompetenciesadd_framework\" data-frameworkid=\"' + $select.val() + '\">' + s[0] + '</div>');\n    $loadingInfoTable.appendTo('#local_displace-framework-container');\n\n    $.get(Config.wwwroot + '/local/displace/competency/coursecompetenciesadd.php?action=competency_selector_tree&courseid=' + courseid + '&frameworkid=' + $select.val()).then(ret => {\n      var $newTable = $(ret);\n\n      $loadingInfoTable.after($newTable);\n      $newTable.toggle($loadingInfoTable.is(':visible'));\n      $loadingInfoTable.remove();\n\n      initTable($newTable);\n    });\n  }\n  // document.location.href = document.location.href.replace(/\\?.*/, '') + '?courseid=' + Config.courseId + '&frameworkid=' + this.value;\n}\n\nasync function get_strings(requests) {\n  return Str.get_strings(requests).then(strings => {\n    var result = {};\n    requests.forEach((str, i) => {\n      result[i] = strings[i]; // backwards compatible\n      result[str.key] = strings[i];\n    });\n    return result;\n  });\n}\n\n/**\n * Initially collapse all competency frameworks.\n * @param {string} uniqid of template.\n */\nexport function competenciesaddInit() {\n  if (debug) {\n    console.log('competenciesaddInit');\n  }\n\n  $('.coursecompetenciesadd select[name=\"frameworkid\"]').change(loadSelectedFramework)\n\n  if ($('#local_displace-framework-container').is(':visible')) {\n    // only load tree if container is visible\n    loadSelectedFramework();\n  }\n\n  $(document).on('input', ':input[name=\"competency-search\"]', function () {\n    const searchText = this.value.trim();\n\n    var $table = getCurrentTable();\n    console.log('input');\n\n    $('#local_displace-table-search-not-entries-found-message').addClass('hidden');\n\n    if (!searchText) {\n      if ($table.find('tr[data-id]:visible').length == 0) {\n        // last search was empty, so show default table\n        // show first level\n        getCurrentTable().find('tr').filter(function () {\n          return getParentPath($(this).attr('data-fullpath')) == '/0';\n        })\n          .removeClass('hidden')\n          // also open first level\n          .each(function () {\n            toggleNode(this, true);\n          });\n      } else {\n        $table.find('tr[data-id]')\n          .removeClass('is-found');\n      }\n    } else {\n      // first hide and close all\n      $table.find('tr[data-id]')\n        .addClass('hidden')\n        .removeClass('is-found')\n        .removeClass('children-visible')\n        .find('.fa-folder').removeClass('fa-folder-open');\n\n      // show found items\n      $table.find('.shortname')\n        .filter((index, el) => el.textContent.toLowerCase().includes(searchText.toLowerCase()))\n        .closest('tr')\n        .addClass('is-found')\n        // then open it and all parents\n        .each((index, el) => {\n          var $tr = $(el);\n\n          do {\n            $tr.removeClass('hidden');\n            toggleNode($tr, true);\n          } while ($tr = getParent($tr));\n        });\n\n      if ($table.find('tr[data-id]:visible').length == 0) {\n        $('#local_displace-table-search-not-entries-found-message').removeClass('hidden');\n      }\n    }\n  });\n}\n\nfunction getParentPath(path) {\n  if (path) {\n    return path.replace(/\\/[0-9]+$/, '');\n  }\n}\n\nfunction initTable($table) {\n  if (sessionCompetencies.length) {\n    sessionCompetencies.forEach((id) => {\n      $table.find('tr[data-id=' + id + ']').addClass('used');\n    });\n  }\n\n  // styles for animation\n  // Idee: den content der TDs in ein DIV wrappen, welches mit der Höhe animiert wird\n  // weil animation der Höhe mit overflow auf TDs nicht funktioniert\n  // zusätzlich das padding entfernen und dieses auf den sliding-wrapper-inner übertragen\n  $table.find('tr td')\n    .each(function () {\n      if ($(this).children().length) {\n        $(this).children().wrapAll('<div class=\"sliding-wrapper-inner\"></div>');\n      } else {\n        $(this).append('<div class=\"sliding-wrapper-inner\"></div>');\n      }\n\n      var $wrapperInner = $(this).find('.sliding-wrapper-inner');\n      $wrapperInner.wrap('<div class=\"sliding-wrapper\"></div>');\n\n      $wrapperInner.css('padding', $(this).css('padding'));\n      $wrapperInner.css('border-top', $(this).css('border-top'));\n    })\n    .css('padding', '0')\n    .css('border-top', 'none')\n\n  // show first level\n  $table.find('tr').filter(function () {\n    return getParentPath($(this).attr('data-fullpath')) == '/0';\n  })\n    .removeClass('hidden')\n    // also open first level\n    .each(function () {\n      toggleNode(this, true);\n    });\n\n  // open used competencies\n  $table.find('tr.used').each(function () {\n    toggleInitRecursive(this);\n  });\n\n  // handle toggle click\n  $table.find('tr.has-children .toggler').click(function (e) {\n    e.preventDefault();\n    toggleNode(this, null, true);\n  })\n\n  // handle other events\n  $table.find('.addsingle').click(function (e) {\n    e.preventDefault();\n    competencyAddSingle(this);\n  });\n\n  $table.find('.addmultiple').click(function (e) {\n    e.preventDefault();\n    competencyAddMultiple(this);\n  });\n\n  $table.find('.removesingle').click(function (e) {\n    e.preventDefault();\n    competencyRemoveSingle(this);\n  });\n}\n\nfunction getParent(tr) {\n  var $tr = $(tr);\n\n  let $parent = $(tr).closest('table').find('tr[data-fullpath=\"' + getParentPath($tr.attr('data-fullpath')) + '\"]');\n  if ($parent.length > 0) {\n    return $parent;\n  }\n}\n\nfunction getChildren(tr) {\n  var $tr = $(tr);\n\n  const parentPath = $tr.attr('data-fullpath');\n\n  return $(tr).closest('table').find('tr[data-fullpath^=\"' + $tr.attr('data-fullpath') + '/\"]')\n    .filter(function () {\n      return getParentPath($(this).attr('data-fullpath')) == parentPath;\n    });\n}\n\n/**\n * Toggle recursively nodes by their parents.\n * @param {DOMElement} tr to start with.\n */\nfunction toggleInitRecursive(tr) {\n  var $tr = $(tr);\n\n  do {\n    $tr.removeClass('hidden');\n    toggleNode($tr, true);\n  } while ($tr = getParent($tr));\n}\n\n/**\n * Recursively toggle nodes.\n * @param {DOMElement} sender\n */\nfunction toggleNode(sender, open = undefined, animate = false) {\n  let $tr = $(sender).closest('tr');\n  let $table = $tr.closest('table');\n\n  if (open === null || open === undefined) {\n    open = !$tr.hasClass('children-visible');\n  }\n  let close = !open;\n\n  // do open/close only if it isn't already opened/closed\n  close = close && $tr.hasClass('children-visible');\n  open = open && !$tr.hasClass('children-visible');\n\n  if (close) {\n    $tr\n      .removeClass('children-visible')\n      .find('.fa-folder').removeClass('fa-folder-open');\n\n    // Make all children hidden.\n    var $children = $table.find('tr[data-fullpath^=\"' + $tr.attr('data-fullpath') + '/\"]').not('.hidden');\n    if (!animate) {\n      $children.addClass('hidden');\n    } else {\n      var $wrapper = $children.find('.sliding-wrapper')\n      const height = $wrapper.outerHeight(); // Get current height\n      $wrapper.css('max-height', height); // Set height for transition\n      setTimeout(() => {\n        $wrapper.css('max-height', 0); // Animate to height 0\n        setTimeout(() => {\n          $children.addClass('hidden');\n          $wrapper.css('max-height', '');\n        }, 500); // Remove element from layout\n      }, 10); // Timeout for\n    }\n  }\n\n  if (open) {\n    $tr\n      .addClass('children-visible')\n      .find('.fa-folder').addClass('fa-folder-open');\n\n    // Make direct children visible and children of the children if they are open too.\n    var $children = getChildren($tr);\n    var $all = getChildren($tr);\n\n    do {\n      $children = $children.filter('.children-visible');\n\n      // get all subchildren in an array\n      $children = $children.map(function () {\n        return $children = getChildren(this).toArray()\n      });\n\n      $all = $all.add($children);\n    } while ($children.length > 0)\n\n    $children = $all;\n\n    if (!animate) {\n      $children.removeClass('hidden');\n    } else {\n      var $wrapper = $children.find('.sliding-wrapper')\n      $children.removeClass('hidden');\n      const height = 100; // Get current height\n      // const height = $wrapper.outerHeight(); // Get current height\n      $wrapper.css('max-height', 10); // Set height for transition\n      setTimeout(() => {\n        $wrapper.css('max-height', height);\n        setTimeout(() => {\n          $wrapper.css('max-height', '');\n        }, 500); // Remove element from layout\n      }, 10); // Timeout for\n    }\n  }\n}\n"],"names":["change","loadSelectedFramework","is","document","on","searchText","this","value","trim","$table","getCurrentTable","console","log","addClass","find","removeClass","filter","index","el","textContent","toLowerCase","includes","closest","each","$tr","toggleNode","getParent","length","getParentPath","attr","select","pendingPromise","Pending","requests","coursecompetencyid","ruleoutcome","val","Ajax","call","methodname","args","courseid","moduleid","then","setTimeout","resolve","queue","queueActiveItem","Config","courseId","useSessionCompetencies","sessionCompetencies","sessionCompetenciesTmp","competencyAddSingle","a","id","push","join","data","competencyQueue","competencyRemoveSingle","confirmed","shortname","html","s","get_strings","component","param","confirm","method","item","shift","done","result","tr","fail","ex","exception","first","$select","selectedText","text","$existingFramework","children","hide","key","show","$loadingInfoTable","appendTo","get","wwwroot","ret","$newTable","after","toggle","remove","forEach","wrapAll","append","$wrapperInner","wrap","css","toggleInitRecursive","click","e","preventDefault","getChildren","selectAll","not","removeNow","competencyAddMultiple","initTable","Str","strings","str","i","path","replace","$parent","parentPath","sender","open","undefined","animate","hasClass","close","$children","height","$wrapper","outerHeight","$all","map","toArray","add","split"],"mappings":"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"}